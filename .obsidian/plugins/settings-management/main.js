/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => SettingsManagement
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  enabledpluginsgroup: [],
  enabledcsssnippets: [],
  pluginsgridtype: "list"
};

// src/main.ts
var SettingsManagement = class extends import_obsidian2.Plugin {
  async onload() {
    await this.loadSettings();
    await this.saveSettings();
    this.settingstabId = this.app.setting.settingTabs.map((tab) => tab.id);
    this.optionsId = ["appearance", "hotkeys", "plugins", "community-plugins"];
    this.optionsmenuEl = null;
    this.addNewSvgIcons();
    await this.createSettingsOptionsMenu();
  }
  onunload() {
    this.deleteMenu();
    this.saveSettings();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async createSettingsOptionsMenu() {
    this.activeTab = this.app.setting.activeTab;
    if (this.activeTab && this.optionsId.includes(this.app.setting.activeTab.id)) {
      this.createMenu(this.app.setting.activeTab.id);
    }
    const setting = this.app.setting;
    setting.onOpen = () => {
      setting.openTabById(setting.lastTabId) || setting.openTab(setting.settingTabs[0]);
      this.activeTab = setting.activeTab;
      this.createMenu(this.activeTab.id);
    };
    setting.settingTabs.forEach(async (tab) => {
      this.registerDomEvent(tab.navEl, "click", () => {
        setting.openTabById(tab.id) || setting.openTab(tab);
        this.createMenu(tab.id);
      });
    });
  }
  createMenu(id) {
    this.deleteMenu();
    if (this.optionsId.includes(id)) {
      this.createSwitcher();
      this.createGridStyle();
      if (id === "appearance" || id === "community-plugins") {
        this.createSaveButton();
        this.createSetConfigButton();
      }
    }
  }
  deleteMenu() {
    if (this.optionsmenuEl) {
      this.optionsmenuEl.remove();
      this.optionsmenuEl = null;
      document.body.classList.remove("pm-show-enabled");
      document.body.classList.remove("pm-show-disabled");
      this.app.setting.activeTab.containerEl.classList.remove("pm-grid");
    }
  }
  addNewSvgIcons() {
    (0, import_obsidian2.addIcon)("toggle-center", '<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-toggle-center"><rect width="20" height="12" x="2" y="6" rx="6" ry="6"/><circle cx="12" cy="12" r="2"/></svg>');
  }
  createSwitcher() {
    if (!this.optionsmenuEl) {
      const containerEl = this.app.setting.tabContentContainer || document.querySelector(".vertical-tab-content-container") || null;
      if (!containerEl) {
        return;
      }
      this.optionsmenuEl = containerEl.createEl("div", { attr: { class: "pm-tabs" } });
    }
    const switcherEl = this.optionsmenuEl.createEl("div", { attr: { class: "pm-tab", value: "switcher" } });
    const switcherButton = new import_obsidian2.ButtonComponent(switcherEl);
    if (document.body.classList.contains("pm-show-enabled")) {
      switcherButton.setIcon("toggle-right");
      switcherButton.setTooltip("Enabled");
    } else if (document.body.classList.contains("pm-show-disabled")) {
      switcherButton.setIcon("toggle-left");
      switcherButton.setTooltip("Disabled");
    } else {
      switcherButton.setIcon("toggle-center");
      switcherButton.setTooltip("All");
    }
    switcherButton.onClick(() => {
      if (document.body.classList.contains("pm-show-enabled")) {
        document.body.classList.remove("pm-show-enabled");
        document.body.classList.add("pm-show-disabled");
        switcherButton.setIcon("toggle-left");
        switcherButton.setTooltip("Disabled");
      } else if (document.body.classList.contains("pm-show-disabled")) {
        document.body.classList.remove("pm-show-disabled");
        switcherButton.setIcon("toggle-center");
        switcherButton.setTooltip("All");
      } else {
        document.body.classList.add("pm-show-enabled");
        switcherButton.setIcon("toggle-right");
        switcherButton.setTooltip("Enabled");
      }
    });
  }
  createGridStyle() {
    if (!this.optionsmenuEl) {
      const containerEl = this.app.setting.tabContentContainer || document.querySelector(".vertical-tab-content-container") || null;
      if (!containerEl) {
        return;
      }
      this.optionsmenuEl = containerEl.createEl("div", { attr: { class: "pm-tabs" } });
    }
    const gridStyleEl = this.optionsmenuEl.createEl("div", { attr: { class: "pm-tab", value: "grid" } });
    const gridStyleButton = new import_obsidian2.ButtonComponent(gridStyleEl);
    if (this.settings.pluginsgridtype === "grid") {
      this.app.setting.activeTab.containerEl.classList.add("pm-grid");
      gridStyleButton.setIcon("layout-grid");
      gridStyleButton.setTooltip("Grid layout");
    } else {
      this.app.setting.activeTab.containerEl.classList.remove("pm-grid");
      gridStyleButton.setIcon("menu");
      gridStyleButton.setTooltip("List layout");
    }
    gridStyleButton.onClick(async () => {
      if (this.settings.pluginsgridtype === "grid") {
        this.app.setting.activeTab.containerEl.classList.remove("pm-grid");
        gridStyleButton.setIcon("menu");
        gridStyleButton.setTooltip("List layout");
        this.settings.pluginsgridtype = "list";
      } else {
        this.app.setting.activeTab.containerEl.classList.add("pm-grid");
        gridStyleButton.setIcon("layout-grid");
        gridStyleButton.setTooltip("Grid layout");
        this.settings.pluginsgridtype = "grid";
      }
      await this.saveSettings();
    });
  }
  createSaveButton() {
    if (!this.optionsmenuEl) {
      return;
    }
    const saveEl = this.optionsmenuEl.createEl("div", { attr: { class: "pm-tab", value: "save" } });
    const saveButton = new import_obsidian2.ButtonComponent(saveEl);
    saveButton.setIcon("save");
    saveButton.setTooltip("Save current configuration.");
    saveButton.onClick(async () => {
      this.saveCurrentConfig();
      await this.saveSettings();
    });
  }
  saveCurrentConfig() {
    const activeTab = this.app.setting.lastTabId;
    switch (activeTab) {
      case "appearance":
        this.saveCssSnippetsConfig();
        break;
      case "community-plugins":
        this.saveCommunityPluginsConfig();
        break;
      default:
        break;
    }
  }
  createSetConfigButton() {
    if (!this.optionsmenuEl) {
      return;
    }
    const configList = this.optionsmenuEl.createEl("div", { attr: { class: "pm-tab", value: "config" } });
    (0, import_obsidian2.setIcon)(configList, "boxes");
    if (this.app.setting.lastTabId === "community-plugins") {
      this.registerDomEvent(configList, "click", () => {
        this.createComPluginsConfigList();
      });
    } else {
      this.registerDomEvent(configList, "click", () => {
        this.createCssSnippetsConfigList();
      });
    }
  }
  /* css snippets */
  createCssSnippetsConfigList() {
    if (!this.optionsmenuEl) {
      return;
    }
    if (this.settings.enabledcsssnippets.length === 0) {
      new import_obsidian2.Notice("No saved configuration");
      return;
    }
    this.configListEl = this.optionsmenuEl.createEl("div", { attr: { class: "pm-configs" } });
    const configCloseEl = this.configListEl.createEl("div", { attr: { class: "pm-tab pm-config pm-config-close", value: "close-icon" } });
    (0, import_obsidian2.setIcon)(configCloseEl, "x");
    this.registerDomEvent(configCloseEl, "click", () => {
      this.configListEl && this.configListEl.remove();
      this.configListEl = null;
    });
    for (let i = 0; i < this.settings.enabledcsssnippets.length; i++) {
      const configItemEl = this.configListEl.createEl("div", { attr: { class: "pm-tab pm-config", value: this.settings.enabledcsssnippets[i].id } });
      const configItemButton = new import_obsidian2.ButtonComponent(configItemEl);
      configItemButton.setIcon("puzzle");
      configItemButton.setTooltip(this.settings.enabledcsssnippets[i].name);
      configItemButton.onClick(() => {
        this.loadCssSnippetsConfig(this.settings.enabledcsssnippets[i]);
        this.configListEl && this.configListEl.remove();
        this.configListEl = null;
      });
      this.registerDomEvent(configItemEl, "contextmenu", (event) => {
        event.preventDefault();
        const menu = new import_obsidian2.Menu();
        menu.addItem((item) => {
          item.setTitle("Delete").setIcon("trash");
          item.onClick(() => {
            this.settings.enabledcsssnippets.splice(i, 1);
            configItemEl.remove();
            this.saveSettings();
          });
        });
        menu.addItem((item) => {
          item.setTitle("Modify").setIcon("pencil");
          item.onClick(() => {
            this.renameCssSnippetsConfig(i);
          });
        });
        menu.showAtMouseEvent(event);
      });
    }
  }
  loadCssSnippetsConfig(config) {
    var _a;
    const snippetsListEl = this.app.setting.tabContentContainer.querySelectorAll(".setting-item.setting-item-heading:has(.clickable-icon) ~ .setting-item.mod-toggle");
    for (let i = 0; i < snippetsListEl.length; i++) {
      const snippetEl = snippetsListEl[i];
      const snippetName = (_a = snippetEl.querySelector(".setting-item-name")) == null ? void 0 : _a.textContent;
      if (!snippetName) {
        continue;
      }
      if (config.enabledcsssnippets.includes(snippetName)) {
        const snippetToggleButton = snippetEl.querySelector(".checkbox-container");
        if (snippetToggleButton && !snippetToggleButton.classList.contains("is-enabled")) {
          snippetToggleButton.click();
        }
      } else if (!config.enabledcsssnippets.includes(snippetName)) {
        const snippetToggleButton = snippetEl.querySelector(".checkbox-container");
        if (snippetToggleButton && snippetToggleButton.classList.contains("is-enabled")) {
          snippetToggleButton.click();
        }
      } else {
        console.log(`Can't find snippet: ${snippetName}`);
      }
    }
  }
  renameCssSnippetsConfig(index) {
    const getNameModal = new import_obsidian2.Modal(this.app).setTitle("Rename css snippets config");
    getNameModal.onOpen = () => {
      let configName = "";
      new import_obsidian2.Setting(getNameModal.contentEl).setName("Config name").addText((text) => text.setPlaceholder(this.settings.enabledcsssnippets[index].name).onChange(
        (value) => {
          configName = value;
        }
      )).addButton(
        (button) => button.setButtonText("Save").onClick(() => {
          if (configName === "") {
            new import_obsidian2.Notice("Config name is empty.");
            return;
          } else {
            this.settings.enabledcsssnippets[index].name = configName;
            this.saveSettings();
            getNameModal.close();
          }
        })
      );
      getNameModal.contentEl.find("input").focus();
    };
    getNameModal.open();
  }
  async saveCssSnippetsConfig() {
    const getNameModal = new import_obsidian2.Modal(this.app).setTitle("Add new css snippets config");
    getNameModal.onOpen = () => {
      let configName = "";
      new import_obsidian2.Setting(getNameModal.contentEl).setName("Config name").addText((text) => text.onChange(
        (value) => {
          configName = value;
        }
      )).addButton(
        (button) => button.setButtonText("Save").onClick(() => {
          if (configName === "") {
            new import_obsidian2.Notice("Config name is empty.");
            return;
          } else {
            this.settings.enabledcsssnippets.push(
              this.createCurCssSnippetsConfig(this.app.setting.tabContentContainer, configName)
            );
            this.saveSettings();
            getNameModal.close();
          }
        })
      );
      getNameModal.contentEl.find("input").focus();
    };
    getNameModal.open();
    await this.saveSettings();
  }
  createCurCssSnippetsConfig(container, configName) {
    const snippetsListEl = container.querySelectorAll(".setting-item.setting-item-heading:has(.clickable-icon) ~ .setting-item.mod-toggle");
    const snippets = Array.from(snippetsListEl).map((snippetEl) => {
      var _a;
      return ((_a = snippetEl.querySelector(".setting-item-name")) == null ? void 0 : _a.textContent) || "";
    });
    return {
      id: Date.now().toString(10),
      name: configName,
      enabledcsssnippets: snippets
    };
  }
  /* community plugins */
  createComPluginsConfigList() {
    if (!this.optionsmenuEl) {
      return;
    }
    if (this.settings.enabledpluginsgroup.length === 0) {
      new import_obsidian2.Notice("No saved configuration");
      return;
    }
    this.configListEl = this.optionsmenuEl.createEl("div", { attr: { class: "pm-configs" } });
    const configCloseEl = this.configListEl.createEl("div", { attr: { class: "pm-tab pm-config pm-config-close", value: "close-icon" } });
    (0, import_obsidian2.setIcon)(configCloseEl, "x");
    this.registerDomEvent(configCloseEl, "click", () => {
      this.configListEl && this.configListEl.remove();
      this.configListEl = null;
    });
    for (let i = 0; i < this.settings.enabledpluginsgroup.length; i++) {
      const configItemEl = this.configListEl.createEl("div", { attr: { class: "pm-tab pm-config", value: this.settings.enabledpluginsgroup[i].id } });
      const configItemButton = new import_obsidian2.ButtonComponent(configItemEl);
      configItemButton.setTooltip(this.settings.enabledpluginsgroup[i].name);
      configItemButton.setIcon(this.settings.enabledpluginsgroup[i].icon);
      configItemButton.onClick(async () => {
        this.loadComPluginsConfig(this.settings.enabledpluginsgroup[i]);
        this.configListEl && this.configListEl.remove();
        this.configListEl = null;
      });
      this.registerDomEvent(configItemEl, "contextmenu", (event) => {
        event.preventDefault();
        const menu = new import_obsidian2.Menu();
        menu.addItem((item) => {
          item.setTitle("Delete").setIcon("trash");
          item.onClick(() => {
            this.settings.enabledpluginsgroup.splice(i, 1);
            this.saveSettings();
            configItemEl.remove();
            if (this.configListEl && this.configListEl.children.length === 1) {
              this.configListEl.remove();
              this.configListEl = null;
            }
          });
        });
        menu.addItem((item) => {
          item.setTitle("Modify").setIcon("pencil");
          item.onClick(() => {
            this.modifyComPluginsConfig(i);
          });
        });
        menu.showAtMouseEvent(event);
      });
    }
  }
  modifyComPluginsConfig(index) {
    const getNameModal = new import_obsidian2.Modal(this.app).setTitle("Modify plugins config");
    getNameModal.onOpen = () => {
      let configName = "";
      new import_obsidian2.Setting(getNameModal.contentEl).setName("Config name").addText((text) => text.setPlaceholder(this.settings.enabledpluginsgroup[index].name).onChange(
        (value) => {
          configName = value;
        }
      )).addButton(
        (button) => button.setButtonText("Save").onClick(() => {
          if (configName === "") {
            new import_obsidian2.Notice("Config name is empty.");
            return;
          } else {
            this.settings.enabledpluginsgroup[index].name = configName;
            this.settings.enabledpluginsgroup[index].icontype = icontype;
            this.settings.enabledpluginsgroup[index].icon = icon;
            this.saveSettings();
            getNameModal.close();
          }
        })
      );
      let icontype = this.settings.enabledpluginsgroup[index].icontype;
      let icon = this.settings.enabledpluginsgroup[index].icon;
      const iconSetting = new import_obsidian2.Setting(getNameModal.contentEl).setName("Config icon").setDesc("Accepts lucide icon.(Click the icon to refresh. Svg icon in the future.)");
      let iconnameEl;
      iconSetting.addText(
        (text) => {
          text.setValue(this.settings.enabledpluginsgroup[index].icon).onChange((value) => {
            icon = value;
            (0, import_obsidian2.setIcon)(previewIcon, "refresh-cw");
          });
          iconnameEl = text.inputEl;
        }
      );
      const previewIcon = iconSetting.controlEl.createDiv({ attr: { class: "pm-preview-icon" } });
      (0, import_obsidian2.setIcon)(previewIcon, this.settings.enabledpluginsgroup[index].icon);
      this.registerDomEvent(previewIcon, "click", () => {
        if (icontype === "lucide") {
          (0, import_obsidian2.setIcon)(previewIcon, icon);
        } else if (icontype === "svg") {
          (0, import_obsidian2.addIcon)("newconfigicon", icon);
          (0, import_obsidian2.setIcon)(previewIcon, icon);
        }
      });
      getNameModal.contentEl.find("input").focus();
    };
    getNameModal.open();
  }
  loadComPluginsConfig(config) {
    var _a, _b, _c;
    if (!this.app.setting.settingTabs[6].installedPluginsEl) {
      return;
    }
    const pluginsListEl = this.app.setting.settingTabs[6].installedPluginsEl.childNodes;
    for (let i = 0; i < pluginsListEl.length; i++) {
      const pluginEl = pluginsListEl[i];
      const pluginName = (_a = pluginEl.querySelector(".setting-item-name")) == null ? void 0 : _a.textContent;
      if (!pluginName) {
        continue;
      }
      const pluginDescription = ((_c = (_b = pluginEl.querySelector(".setting-item-description")) == null ? void 0 : _b.lastChild) == null ? void 0 : _c.textContent) || "";
      const pluginId = this.nameToId(pluginName, pluginDescription);
      if (pluginId && config.enabledplugins.includes(pluginId)) {
        const pluginToggleButton = pluginEl.querySelector(".checkbox-container");
        if (pluginToggleButton && !pluginToggleButton.classList.contains("is-enabled")) {
          pluginToggleButton.click();
        }
      } else if (pluginId && !config.enabledplugins.includes(pluginId)) {
        const pluginToggleButton = pluginEl.querySelector(".checkbox-container");
        if (pluginToggleButton && pluginToggleButton.classList.contains("is-enabled")) {
          pluginToggleButton.click();
        }
      } else {
        console.log(`Can't find plugin: ${pluginName}`);
      }
    }
  }
  nameToId(name, description) {
    return Object.keys(this.app.plugins.manifests).find((key) => this.app.plugins.manifests[key].name === name && this.app.plugins.manifests[key].description === description) || "";
  }
  saveCommunityPluginsConfig() {
    const getNameModal = new import_obsidian2.Modal(this.app).setTitle("Add new community plugins config");
    getNameModal.onOpen = () => {
      let configName = "";
      new import_obsidian2.Setting(getNameModal.contentEl).setName("Config name").addText(
        (text) => text.onChange((value) => {
          configName = value;
        })
      ).addButton(
        (button) => button.setButtonText("Save").onClick(() => {
          if (configName === "") {
            new import_obsidian2.Notice("Config name is empty.");
            return;
          } else {
            this.settings.enabledpluginsgroup.push(this.createCurComPluginsConfig(this.app.plugins.enabledPlugins, configName, icontype, icon));
            this.saveSettings();
            getNameModal.close();
          }
        })
      );
      let icontype = "lucide";
      let icon = "puzzle";
      const iconSetting = new import_obsidian2.Setting(getNameModal.contentEl).setName("Config icon").setDesc("Accepts lucide icon.(Click the icon to refresh. Svg icon in the future.)");
      let iconnameEl;
      iconSetting.addText(
        (text) => {
          text.setValue(icon).onChange((value) => {
            icon = value;
            (0, import_obsidian2.setIcon)(previewIcon, "refresh-cw");
          });
          iconnameEl = text.inputEl;
        }
      );
      const previewIcon = iconSetting.controlEl.createDiv({ attr: { class: "pm-preview-icon" } });
      (0, import_obsidian2.setIcon)(previewIcon, "puzzle");
      this.registerDomEvent(previewIcon, "click", () => {
        if (icontype === "lucide") {
          (0, import_obsidian2.setIcon)(previewIcon, icon);
        } else if (icontype === "svg") {
          (0, import_obsidian2.addIcon)("newconfigicon", icon);
          (0, import_obsidian2.setIcon)(previewIcon, icon);
        }
      });
      getNameModal.contentEl.find("input").focus();
    };
    getNameModal.open();
  }
  createCurComPluginsConfig(enabledPlugins, name, icontype, icon) {
    return {
      id: Date.now().toString(10),
      name,
      icontype,
      icon,
      enabledplugins: Array.from(enabledPlugins)
    };
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vb2JzaWRpYW4tc2V0dGluZ3MtbWFuYWdlbWVudC9zcmMvbWFpbi50cyIsICIuLi8uLi8uLi8uLi9vYnNpZGlhbi1zZXR0aW5ncy1tYW5hZ2VtZW50L3NyYy9zZXR0aW5ncy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50LCBNZW51LCBNb2RhbCwgTm90aWNlLCBQbGF0Zm9ybSwgUGx1Z2luLCBTZXR0aW5nLCBTZXR0aW5nVGFiLCBhZGRJY29uLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgU2V0dGluZ3NPcHRpb25zTWFuYWdlbWVudFNldHRpbmdzIGFzIFNldHRpbmdzTWFuYWdlbWVudFNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBFbmFibGVkQ3NzU25pcHBldHMsIEVuYWJsZWRQbHVnaW5zIH0gZnJvbSAnLi90eXBlcyc7XG5cbmRlY2xhcmUgbW9kdWxlIFwib2JzaWRpYW5cIiB7XG4gIGludGVyZmFjZSBBcHAge1xuICAgIHNldHRpbmc6IEFwcFNldHRpbmc7XG4gICAgcGx1Z2luczogUGx1Z2luc0NvbmZpZztcbiAgfVxuICAvLyB0aGlzLmFwcC5zZXR0aW5nXG4gIGludGVyZmFjZSBBcHBTZXR0aW5nIHtcbiAgICBhY3RpdmVUYWI6IFNldHRpbmdUYWI7XG4gICAgc2V0dGluZ1RhYnM6IFNldHRpbmdUYWJbXTtcbiAgICB0YWJDb250ZW50Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBsYXN0VGFiSWQ6IHN0cmluZztcbiAgICBvbk9wZW4oKTogdm9pZDtcbiAgICBvcGVuVGFiQnlJZChpZDogc3RyaW5nKTogYm9vbGVhbjtcbiAgICBvcGVuVGFiKHRhYjogU2V0dGluZ1RhYik6IHZvaWQ7XG4gIH1cblxuICBpbnRlcmZhY2UgU2V0dGluZ1RhYiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICAgIG5hdkVsOiBIVE1MRWxlbWVudDtcbiAgICBpbnN0YWxsZWRQbHVnaW5zRWw/OiBIVE1MRWxlbWVudDtcbiAgfVxuICAvLyB0aGlzLmFwcC5wbHVnaW5zXG4gIGludGVyZmFjZSBQbHVnaW5zQ29uZmlnIHtcbiAgICBtYW5pZmVzdHM6IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IFBsdWdpbk1hbmlmZXN0O1xuICAgIH07XG4gICAgZW5hYmxlZFBsdWdpbnM6IFNldDxzdHJpbmc+O1xuICAgIHBsdWdpbnM6IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IFBsdWdpbjtcbiAgICB9XG4gICAgaXNFbmFibGVkKHBsdWdpbmlkOiBzdHJpbmcpOiBib29sZWFuO1xuICAgIGVuYWJsZVBsdWdpbkFuZFNhdmUocGx1Z2luaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gICAgZGlzYWJsZVBsdWdpbkFuZFNhdmUocGx1Z2luaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGluZ3NNYW5hZ2VtZW50IGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlbWVudFNldHRpbmdzO1xuICBzZXR0aW5nVGFiczogU2V0dGluZ1RhYltdO1xuICBzZXR0aW5nc3RhYklkOiBzdHJpbmdbXTtcbiAgb3B0aW9uc0lkOiBzdHJpbmdbXTtcbiAgYWN0aXZlVGFiOiBTZXR0aW5nVGFiO1xuICBvcHRpb25zbWVudUVsOiBIVE1MRWxlbWVudCB8IG51bGw7XG4gIGNvbmZpZ0xpc3RFbDogSFRNTEVsZW1lbnQgfCBudWxsO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgLy8gdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBQbHVnaW5zTWFuYWdlbWVudFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTsgLy8gSGF2ZW4ndCB1c2Ugc2V0dGluZ1RhYiB0ZW1wb3JhcmlseS5cblxuICAgIHRoaXMuc2V0dGluZ3N0YWJJZCA9IHRoaXMuYXBwLnNldHRpbmcuc2V0dGluZ1RhYnMubWFwKHRhYiA9PiB0YWIuaWQpO1xuICAgIHRoaXMub3B0aW9uc0lkID0gWydhcHBlYXJhbmNlJywgJ2hvdGtleXMnLCAncGx1Z2lucycsICdjb21tdW5pdHktcGx1Z2lucyddO1xuICAgIHRoaXMub3B0aW9uc21lbnVFbCA9IG51bGw7XG5cbiAgICAvLyBhZGQgbmV3IHN2ZyBpY29uczogdG9nZ2xlLWNlbnRlciB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluIGx1Y2lkZS4gSXQncyBhIHRvZ2dsZSBpY29uIGJ1dCB0aGUgY2lyY2xlIGlzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHJlY3QuXG4gICAgdGhpcy5hZGROZXdTdmdJY29ucygpO1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlU2V0dGluZ3NPcHRpb25zTWVudSgpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5kZWxldGVNZW51KCk7XG4gICAgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlU2V0dGluZ3NPcHRpb25zTWVudSgpIHtcbiAgICB0aGlzLmFjdGl2ZVRhYiA9IHRoaXMuYXBwLnNldHRpbmcuYWN0aXZlVGFiO1xuICAgIGlmICh0aGlzLmFjdGl2ZVRhYiAmJiB0aGlzLm9wdGlvbnNJZC5pbmNsdWRlcyh0aGlzLmFwcC5zZXR0aW5nLmFjdGl2ZVRhYi5pZCkpIHtcbiAgICAgIHRoaXMuY3JlYXRlTWVudSh0aGlzLmFwcC5zZXR0aW5nLmFjdGl2ZVRhYi5pZCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2V0dGluZyA9IHRoaXMuYXBwLnNldHRpbmc7XG4gICAgc2V0dGluZy5vbk9wZW4gPSAoKSA9PiB7XG4gICAgICBzZXR0aW5nLm9wZW5UYWJCeUlkKHNldHRpbmcubGFzdFRhYklkKSB8fCBzZXR0aW5nLm9wZW5UYWIoc2V0dGluZy5zZXR0aW5nVGFic1swXSlcbiAgICAgIHRoaXMuYWN0aXZlVGFiID0gc2V0dGluZy5hY3RpdmVUYWI7XG4gICAgICB0aGlzLmNyZWF0ZU1lbnUodGhpcy5hY3RpdmVUYWIuaWQpO1xuICAgIH1cblxuICAgIC8vIFx1NzZEMVx1NTQyQ1x1NkJDRlx1NEUyQSB0YWIgXHU2NjJGXHU1NDI2XHU4OEFCXHU3MEI5XHU1MUZCXG4gICAgc2V0dGluZy5zZXR0aW5nVGFicy5mb3JFYWNoKGFzeW5jICh0YWIpID0+IHtcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudCh0YWIubmF2RWwsICdjbGljaycsICgpID0+IHtcbiAgICAgICAgc2V0dGluZy5vcGVuVGFiQnlJZCh0YWIuaWQpIHx8IHNldHRpbmcub3BlblRhYih0YWIpO1xuICAgICAgICB0aGlzLmNyZWF0ZU1lbnUodGFiLmlkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlTWVudShpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5kZWxldGVNZW51KCk7XG4gICAgaWYgKHRoaXMub3B0aW9uc0lkLmluY2x1ZGVzKGlkKSkge1xuICAgICAgdGhpcy5jcmVhdGVTd2l0Y2hlcigpO1xuICAgICAgdGhpcy5jcmVhdGVHcmlkU3R5bGUoKTtcbiAgICAgIGlmIChpZCA9PT0gJ2FwcGVhcmFuY2UnIHx8IGlkID09PSAnY29tbXVuaXR5LXBsdWdpbnMnKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlU2F2ZUJ1dHRvbigpO1xuICAgICAgICB0aGlzLmNyZWF0ZVNldENvbmZpZ0J1dHRvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZU1lbnUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3B0aW9uc21lbnVFbCkge1xuICAgICAgdGhpcy5vcHRpb25zbWVudUVsLnJlbW92ZSgpO1xuICAgICAgdGhpcy5vcHRpb25zbWVudUVsID0gbnVsbDtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncG0tc2hvdy1lbmFibGVkJyk7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3BtLXNob3ctZGlzYWJsZWQnKTtcbiAgICAgIC8vIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncG0tZ3JpZCcpO1xuICAgICAgdGhpcy5hcHAuc2V0dGluZy5hY3RpdmVUYWIuY29udGFpbmVyRWwuY2xhc3NMaXN0LnJlbW92ZSgncG0tZ3JpZCcpO1xuICAgIH1cbiAgfVxuXG4gIGFkZE5ld1N2Z0ljb25zKCkge1xuICAgIGFkZEljb24oJ3RvZ2dsZS1jZW50ZXInLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJsdWNpZGUgbHVjaWRlLXRvZ2dsZS1jZW50ZXJcIj48cmVjdCB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMTJcIiB4PVwiMlwiIHk9XCI2XCIgcng9XCI2XCIgcnk9XCI2XCIvPjxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiMlwiLz48L3N2Zz4nKVxuICB9XG5cbiAgY3JlYXRlU3dpdGNoZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnNtZW51RWwpIHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5hcHAuc2V0dGluZy50YWJDb250ZW50Q29udGFpbmVyIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fCBudWxsO1xuICAgICAgaWYgKCFjb250YWluZXJFbCkgeyByZXR1cm47IH1cbiAgICAgIHRoaXMub3B0aW9uc21lbnVFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGF0dHI6IHsgY2xhc3M6ICdwbS10YWJzJyB9IH0pO1xuICAgIH1cbiAgICBjb25zdCBzd2l0Y2hlckVsID0gdGhpcy5vcHRpb25zbWVudUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGF0dHI6IHsgY2xhc3M6ICdwbS10YWInLCB2YWx1ZTogJ3N3aXRjaGVyJyB9IH0pO1xuICAgIGNvbnN0IHN3aXRjaGVyQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChzd2l0Y2hlckVsKTtcbiAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3BtLXNob3ctZW5hYmxlZCcpKSB7XG4gICAgICBzd2l0Y2hlckJ1dHRvbi5zZXRJY29uKCd0b2dnbGUtcmlnaHQnKTtcbiAgICAgIHN3aXRjaGVyQnV0dG9uLnNldFRvb2x0aXAoJ0VuYWJsZWQnKTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdwbS1zaG93LWRpc2FibGVkJykpIHtcbiAgICAgIHN3aXRjaGVyQnV0dG9uLnNldEljb24oJ3RvZ2dsZS1sZWZ0Jyk7XG4gICAgICBzd2l0Y2hlckJ1dHRvbi5zZXRUb29sdGlwKCdEaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2hlckJ1dHRvbi5zZXRJY29uKCd0b2dnbGUtY2VudGVyJyk7XG4gICAgICBzd2l0Y2hlckJ1dHRvbi5zZXRUb29sdGlwKCdBbGwnKTtcbiAgICB9XG5cbiAgICBzd2l0Y2hlckJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygncG0tc2hvdy1lbmFibGVkJykpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwbS1zaG93LWVuYWJsZWQnKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwbS1zaG93LWRpc2FibGVkJyk7XG4gICAgICAgIHN3aXRjaGVyQnV0dG9uLnNldEljb24oJ3RvZ2dsZS1sZWZ0Jyk7XG4gICAgICAgIHN3aXRjaGVyQnV0dG9uLnNldFRvb2x0aXAoJ0Rpc2FibGVkJyk7XG4gICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdwbS1zaG93LWRpc2FibGVkJykpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwbS1zaG93LWRpc2FibGVkJyk7XG4gICAgICAgIHN3aXRjaGVyQnV0dG9uLnNldEljb24oJ3RvZ2dsZS1jZW50ZXInKTtcbiAgICAgICAgc3dpdGNoZXJCdXR0b24uc2V0VG9vbHRpcCgnQWxsJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3BtLXNob3ctZW5hYmxlZCcpO1xuICAgICAgICBzd2l0Y2hlckJ1dHRvbi5zZXRJY29uKCd0b2dnbGUtcmlnaHQnKTtcbiAgICAgICAgc3dpdGNoZXJCdXR0b24uc2V0VG9vbHRpcCgnRW5hYmxlZCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlR3JpZFN0eWxlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5vcHRpb25zbWVudUVsKSB7XG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuYXBwLnNldHRpbmcudGFiQ29udGVudENvbnRhaW5lciB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHwgbnVsbDtcbiAgICAgIGlmICghY29udGFpbmVyRWwpIHsgcmV0dXJuOyB9XG4gICAgICB0aGlzLm9wdGlvbnNtZW51RWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBhdHRyOiB7IGNsYXNzOiAncG0tdGFicycgfSB9KTtcbiAgICB9XG4gICAgY29uc3QgZ3JpZFN0eWxlRWwgPSB0aGlzLm9wdGlvbnNtZW51RWwuY3JlYXRlRWwoJ2RpdicsIHsgYXR0cjogeyBjbGFzczogJ3BtLXRhYicsIHZhbHVlOiAnZ3JpZCcgfSB9KTtcbiAgICBjb25zdCBncmlkU3R5bGVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGdyaWRTdHlsZUVsKTtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5wbHVnaW5zZ3JpZHR5cGUgPT09ICdncmlkJykge1xuICAgICAgLy8gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwbS1ncmlkJyk7XG4gICAgICB0aGlzLmFwcC5zZXR0aW5nLmFjdGl2ZVRhYi5jb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKCdwbS1ncmlkJyk7XG4gICAgICBncmlkU3R5bGVCdXR0b24uc2V0SWNvbignbGF5b3V0LWdyaWQnKTtcbiAgICAgIGdyaWRTdHlsZUJ1dHRvbi5zZXRUb29sdGlwKCdHcmlkIGxheW91dCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3BtLWdyaWQnKTtcbiAgICAgIHRoaXMuYXBwLnNldHRpbmcuYWN0aXZlVGFiLmNvbnRhaW5lckVsLmNsYXNzTGlzdC5yZW1vdmUoJ3BtLWdyaWQnKTtcbiAgICAgIGdyaWRTdHlsZUJ1dHRvbi5zZXRJY29uKCdtZW51Jyk7XG4gICAgICBncmlkU3R5bGVCdXR0b24uc2V0VG9vbHRpcCgnTGlzdCBsYXlvdXQnKTtcbiAgICB9XG5cbiAgICBncmlkU3R5bGVCdXR0b24ub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5wbHVnaW5zZ3JpZHR5cGUgPT09ICdncmlkJykge1xuICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3BtLWdyaWQnKTtcbiAgICAgICAgdGhpcy5hcHAuc2V0dGluZy5hY3RpdmVUYWIuY29udGFpbmVyRWwuY2xhc3NMaXN0LnJlbW92ZSgncG0tZ3JpZCcpO1xuICAgICAgICBncmlkU3R5bGVCdXR0b24uc2V0SWNvbignbWVudScpO1xuICAgICAgICBncmlkU3R5bGVCdXR0b24uc2V0VG9vbHRpcCgnTGlzdCBsYXlvdXQnKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5wbHVnaW5zZ3JpZHR5cGUgPSAnbGlzdCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3BtLWdyaWQnKTtcbiAgICAgICAgdGhpcy5hcHAuc2V0dGluZy5hY3RpdmVUYWIuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZCgncG0tZ3JpZCcpO1xuICAgICAgICBncmlkU3R5bGVCdXR0b24uc2V0SWNvbignbGF5b3V0LWdyaWQnKTtcbiAgICAgICAgZ3JpZFN0eWxlQnV0dG9uLnNldFRvb2x0aXAoJ0dyaWQgbGF5b3V0Jyk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MucGx1Z2luc2dyaWR0eXBlID0gJ2dyaWQnO1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVNhdmVCdXR0b24oKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnNtZW51RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTRGRERcdTVCNThcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBzYXZlRWwgPSB0aGlzLm9wdGlvbnNtZW51RWwuY3JlYXRlRWwoJ2RpdicsIHsgYXR0cjogeyBjbGFzczogJ3BtLXRhYicsIHZhbHVlOiAnc2F2ZScgfSB9KTtcbiAgICBjb25zdCBzYXZlQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChzYXZlRWwpO1xuICAgIHNhdmVCdXR0b24uc2V0SWNvbignc2F2ZScpO1xuICAgIHNhdmVCdXR0b24uc2V0VG9vbHRpcCgnU2F2ZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24uJyk7XG4gICAgc2F2ZUJ1dHRvbi5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgIHRoaXMuc2F2ZUN1cnJlbnRDb25maWcoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgfSk7XG4gIH1cblxuICBzYXZlQ3VycmVudENvbmZpZygpOiB2b2lkIHtcbiAgICBjb25zdCBhY3RpdmVUYWIgPSB0aGlzLmFwcC5zZXR0aW5nLmxhc3RUYWJJZDtcbiAgICBzd2l0Y2ggKGFjdGl2ZVRhYikge1xuICAgICAgY2FzZSAnYXBwZWFyYW5jZSc6XG4gICAgICAgIHRoaXMuc2F2ZUNzc1NuaXBwZXRzQ29uZmlnKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY29tbXVuaXR5LXBsdWdpbnMnOlxuICAgICAgICB0aGlzLnNhdmVDb21tdW5pdHlQbHVnaW5zQ29uZmlnKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlU2V0Q29uZmlnQnV0dG9uKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5vcHRpb25zbWVudUVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1OTE0RFx1N0Y2RVx1NTIxN1x1ODg2OFx1RkYwQ1x1NzUyOFx1NEU4RVx1NUI1OFx1NjUzRVx1OTE0RFx1N0Y2RVx1RkYwQ1x1NzBCOVx1NTFGQlx1NTQwRVx1NTNFRlx1NEVFNVx1NEY3Rlx1NzUyOFx1NUJGOVx1NUU5NFx1NzY4NFx1OTE0RFx1N0Y2RVxuICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLm9wdGlvbnNtZW51RWwuY3JlYXRlRWwoJ2RpdicsIHsgYXR0cjogeyBjbGFzczogJ3BtLXRhYicsIHZhbHVlOiAnY29uZmlnJyB9IH0pO1xuICAgIHNldEljb24oY29uZmlnTGlzdCwgJ2JveGVzJyk7XG4gICAgaWYgKHRoaXMuYXBwLnNldHRpbmcubGFzdFRhYklkID09PSAnY29tbXVuaXR5LXBsdWdpbnMnKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoY29uZmlnTGlzdCwgJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbVBsdWdpbnNDb25maWdMaXN0KCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGNvbmZpZ0xpc3QsICdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5jcmVhdGVDc3NTbmlwcGV0c0NvbmZpZ0xpc3QoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qIGNzcyBzbmlwcGV0cyAqL1xuICBjcmVhdGVDc3NTbmlwcGV0c0NvbmZpZ0xpc3QoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnNtZW51RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlZGNzc3NuaXBwZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gc2F2ZWQgY29uZmlndXJhdGlvbicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNvbmZpZ0xpc3RFbCA9IHRoaXMub3B0aW9uc21lbnVFbC5jcmVhdGVFbCgnZGl2JywgeyBhdHRyOiB7IGNsYXNzOiAncG0tY29uZmlncycgfSB9KTtcbiAgICBjb25zdCBjb25maWdDbG9zZUVsID0gdGhpcy5jb25maWdMaXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgYXR0cjogeyBjbGFzczogJ3BtLXRhYiBwbS1jb25maWcgcG0tY29uZmlnLWNsb3NlJywgdmFsdWU6ICdjbG9zZS1pY29uJyB9IH0pO1xuICAgIHNldEljb24oY29uZmlnQ2xvc2VFbCwgJ3gnKTtcbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoY29uZmlnQ2xvc2VFbCwgJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb25maWdMaXN0RWwgJiYgdGhpcy5jb25maWdMaXN0RWwucmVtb3ZlKCk7XG4gICAgICB0aGlzLmNvbmZpZ0xpc3RFbCA9IG51bGw7XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2V0dGluZ3MuZW5hYmxlZGNzc3NuaXBwZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjb25maWdJdGVtRWwgPSB0aGlzLmNvbmZpZ0xpc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBhdHRyOiB7IGNsYXNzOiAncG0tdGFiIHBtLWNvbmZpZycsIHZhbHVlOiB0aGlzLnNldHRpbmdzLmVuYWJsZWRjc3NzbmlwcGV0c1tpXS5pZCB9IH0pO1xuICAgICAgY29uc3QgY29uZmlnSXRlbUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoY29uZmlnSXRlbUVsKTtcbiAgICAgIGNvbmZpZ0l0ZW1CdXR0b24uc2V0SWNvbigncHV6emxlJyk7XG4gICAgICBjb25maWdJdGVtQnV0dG9uLnNldFRvb2x0aXAodGhpcy5zZXR0aW5ncy5lbmFibGVkY3Nzc25pcHBldHNbaV0ubmFtZSk7XG4gICAgICBjb25maWdJdGVtQnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmxvYWRDc3NTbmlwcGV0c0NvbmZpZyh0aGlzLnNldHRpbmdzLmVuYWJsZWRjc3NzbmlwcGV0c1tpXSk7XG4gICAgICAgIHRoaXMuY29uZmlnTGlzdEVsICYmIHRoaXMuY29uZmlnTGlzdEVsLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmNvbmZpZ0xpc3RFbCA9IG51bGw7XG4gICAgICB9KTtcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChjb25maWdJdGVtRWwsICdjb250ZXh0bWVudScsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgbWVudS5hZGRJdGVtKGl0ZW0gPT4ge1xuICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpLnNldEljb24oJ3RyYXNoJyk7XG4gICAgICAgICAgaXRlbS5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZW5hYmxlZGNzc3NuaXBwZXRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGNvbmZpZ0l0ZW1FbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgaXRlbS5zZXRUaXRsZSgnTW9kaWZ5Jykuc2V0SWNvbigncGVuY2lsJyk7XG4gICAgICAgICAgaXRlbS5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuYW1lQ3NzU25pcHBldHNDb25maWcoaSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgbG9hZENzc1NuaXBwZXRzQ29uZmlnKGNvbmZpZzogRW5hYmxlZENzc1NuaXBwZXRzKTogdm9pZCB7XG4gICAgY29uc3Qgc25pcHBldHNMaXN0RWwgPSB0aGlzLmFwcC5zZXR0aW5nLnRhYkNvbnRlbnRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnNldHRpbmctaXRlbS5zZXR0aW5nLWl0ZW0taGVhZGluZzpoYXMoLmNsaWNrYWJsZS1pY29uKSB+IC5zZXR0aW5nLWl0ZW0ubW9kLXRvZ2dsZScpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc25pcHBldHNMaXN0RWwubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNuaXBwZXRFbCA9IHNuaXBwZXRzTGlzdEVsW2ldIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3Qgc25pcHBldE5hbWUgPSBzbmlwcGV0RWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1uYW1lJyk/LnRleHRDb250ZW50O1xuICAgICAgaWYgKCFzbmlwcGV0TmFtZSkgeyBjb250aW51ZTsgfVxuICAgICAgaWYgKGNvbmZpZy5lbmFibGVkY3Nzc25pcHBldHMuaW5jbHVkZXMoc25pcHBldE5hbWUpKSB7XG4gICAgICAgIGNvbnN0IHNuaXBwZXRUb2dnbGVCdXR0b24gPSBzbmlwcGV0RWwucXVlcnlTZWxlY3RvcignLmNoZWNrYm94LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoc25pcHBldFRvZ2dsZUJ1dHRvbiAmJiAhc25pcHBldFRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWVuYWJsZWQnKSkge1xuICAgICAgICAgIHNuaXBwZXRUb2dnbGVCdXR0b24uY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoIWNvbmZpZy5lbmFibGVkY3Nzc25pcHBldHMuaW5jbHVkZXMoc25pcHBldE5hbWUpKSB7XG4gICAgICAgIGNvbnN0IHNuaXBwZXRUb2dnbGVCdXR0b24gPSBzbmlwcGV0RWwucXVlcnlTZWxlY3RvcignLmNoZWNrYm94LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoc25pcHBldFRvZ2dsZUJ1dHRvbiAmJiBzbmlwcGV0VG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnaXMtZW5hYmxlZCcpKSB7XG4gICAgICAgICAgc25pcHBldFRvZ2dsZUJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYENhbid0IGZpbmQgc25pcHBldDogJHtzbmlwcGV0TmFtZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZW5hbWVDc3NTbmlwcGV0c0NvbmZpZyhpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgZ2V0TmFtZU1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKS5zZXRUaXRsZSgnUmVuYW1lIGNzcyBzbmlwcGV0cyBjb25maWcnKTtcbiAgICBnZXROYW1lTW9kYWwub25PcGVuID0gKCkgPT4ge1xuICAgICAgbGV0IGNvbmZpZ05hbWUgPSAnJ1xuICAgICAgbmV3IFNldHRpbmcoZ2V0TmFtZU1vZGFsLmNvbnRlbnRFbClcbiAgICAgICAgLnNldE5hbWUoJ0NvbmZpZyBuYW1lJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKHRoaXMuc2V0dGluZ3MuZW5hYmxlZGNzc3NuaXBwZXRzW2luZGV4XS5uYW1lKVxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbmZpZ05hbWUgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgKSlcbiAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1NhdmUnKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWdOYW1lID09PSAnJykge1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDb25maWcgbmFtZSBpcyBlbXB0eS4nKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5lbmFibGVkY3Nzc25pcHBldHNbaW5kZXhdLm5hbWUgPSBjb25maWdOYW1lO1xuICAgICAgICAgICAgICB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICBnZXROYW1lTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICBnZXROYW1lTW9kYWwuY29udGVudEVsLmZpbmQoJ2lucHV0JykuZm9jdXMoKTtcbiAgICB9XG4gICAgZ2V0TmFtZU1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVDc3NTbmlwcGV0c0NvbmZpZygpIHtcbiAgICBjb25zdCBnZXROYW1lTW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApLnNldFRpdGxlKCdBZGQgbmV3IGNzcyBzbmlwcGV0cyBjb25maWcnKTtcbiAgICBnZXROYW1lTW9kYWwub25PcGVuID0gKCkgPT4ge1xuICAgICAgbGV0IGNvbmZpZ05hbWUgPSAnJ1xuICAgICAgbmV3IFNldHRpbmcoZ2V0TmFtZU1vZGFsLmNvbnRlbnRFbClcbiAgICAgICAgLnNldE5hbWUoJ0NvbmZpZyBuYW1lJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uZmlnTmFtZSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICApKVxuICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnU2F2ZScpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmZpZ05hbWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvbmZpZyBuYW1lIGlzIGVtcHR5LicpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmVuYWJsZWRjc3NzbmlwcGV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQ3VyQ3NzU25pcHBldHNDb25maWcodGhpcy5hcHAuc2V0dGluZy50YWJDb250ZW50Q29udGFpbmVyLCBjb25maWdOYW1lKSk7XG4gICAgICAgICAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgIGdldE5hbWVNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIGdldE5hbWVNb2RhbC5jb250ZW50RWwuZmluZCgnaW5wdXQnKS5mb2N1cygpO1xuICAgIH1cbiAgICBnZXROYW1lTW9kYWwub3BlbigpO1xuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGNyZWF0ZUN1ckNzc1NuaXBwZXRzQ29uZmlnKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNvbmZpZ05hbWU6IHN0cmluZyk6IEVuYWJsZWRDc3NTbmlwcGV0cyB7XG4gICAgY29uc3Qgc25pcHBldHNMaXN0RWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnNldHRpbmctaXRlbS5zZXR0aW5nLWl0ZW0taGVhZGluZzpoYXMoLmNsaWNrYWJsZS1pY29uKSB+IC5zZXR0aW5nLWl0ZW0ubW9kLXRvZ2dsZScpO1xuICAgIGNvbnN0IHNuaXBwZXRzID0gQXJyYXkuZnJvbShzbmlwcGV0c0xpc3RFbCkubWFwKChzbmlwcGV0RWwpID0+IHtcbiAgICAgIHJldHVybiBzbmlwcGV0RWwucXVlcnlTZWxlY3RvcignLnNldHRpbmctaXRlbS1uYW1lJyk/LnRleHRDb250ZW50IHx8ICcnO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKDEwKSxcbiAgICAgIG5hbWU6IGNvbmZpZ05hbWUsXG4gICAgICBlbmFibGVkY3Nzc25pcHBldHM6IHNuaXBwZXRzXG4gICAgfTtcbiAgfVxuXG4gIC8qIGNvbW11bml0eSBwbHVnaW5zICovXG4gIGNyZWF0ZUNvbVBsdWdpbnNDb25maWdMaXN0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5vcHRpb25zbWVudUVsKSB7IHJldHVybjsgfVxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZWRwbHVnaW5zZ3JvdXAubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBzYXZlZCBjb25maWd1cmF0aW9uJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY29uZmlnTGlzdEVsID0gdGhpcy5vcHRpb25zbWVudUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGF0dHI6IHsgY2xhc3M6ICdwbS1jb25maWdzJyB9IH0pO1xuICAgIGNvbnN0IGNvbmZpZ0Nsb3NlRWwgPSB0aGlzLmNvbmZpZ0xpc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBhdHRyOiB7IGNsYXNzOiAncG0tdGFiIHBtLWNvbmZpZyBwbS1jb25maWctY2xvc2UnLCB2YWx1ZTogJ2Nsb3NlLWljb24nIH0gfSk7XG4gICAgc2V0SWNvbihjb25maWdDbG9zZUVsLCAneCcpO1xuICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChjb25maWdDbG9zZUVsLCAnY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvbmZpZ0xpc3RFbCAmJiB0aGlzLmNvbmZpZ0xpc3RFbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuY29uZmlnTGlzdEVsID0gbnVsbDtcbiAgICB9KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZXR0aW5ncy5lbmFibGVkcGx1Z2luc2dyb3VwLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjb25maWdJdGVtRWwgPSB0aGlzLmNvbmZpZ0xpc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBhdHRyOiB7IGNsYXNzOiAncG0tdGFiIHBtLWNvbmZpZycsIHZhbHVlOiB0aGlzLnNldHRpbmdzLmVuYWJsZWRwbHVnaW5zZ3JvdXBbaV0uaWQgfSB9KTtcbiAgICAgIGNvbnN0IGNvbmZpZ0l0ZW1CdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbmZpZ0l0ZW1FbCk7XG4gICAgICBjb25maWdJdGVtQnV0dG9uLnNldFRvb2x0aXAodGhpcy5zZXR0aW5ncy5lbmFibGVkcGx1Z2luc2dyb3VwW2ldLm5hbWUpO1xuICAgICAgY29uZmlnSXRlbUJ1dHRvbi5zZXRJY29uKHRoaXMuc2V0dGluZ3MuZW5hYmxlZHBsdWdpbnNncm91cFtpXS5pY29uKTtcbiAgICAgIGNvbmZpZ0l0ZW1CdXR0b24ub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMubG9hZENvbVBsdWdpbnNDb25maWcodGhpcy5zZXR0aW5ncy5lbmFibGVkcGx1Z2luc2dyb3VwW2ldKTtcbiAgICAgICAgdGhpcy5jb25maWdMaXN0RWwgJiYgdGhpcy5jb25maWdMaXN0RWwucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuY29uZmlnTGlzdEVsID0gbnVsbDtcbiAgICAgICAgLy8gYXdhaXQgc2V0dGluZ3RhYnNbNl0uZGlzcGxheSgpOyAvLyBcdTYwMjdcdTgwRkRcdTk1RUVcdTk4OThcdUZGMENcdTVGRUJcdTkwMUZcdTUyMDdcdTYzNjJcdTkxNERcdTdGNkVcdTY1RjZcdTRGMUFcdTY1RTBcdTZDRDVcdTY2M0VcdTc5M0FcdUZGMENcdTU2RTBcdTZCNjRcdTRFMERcdTRGN0ZcdTc1MjggZGlzYXBsYXkoKSBcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcdTMwMDJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGNvbmZpZ0l0ZW1FbCwgJ2NvbnRleHRtZW51JywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgaXRlbS5zZXRUaXRsZSgnRGVsZXRlJykuc2V0SWNvbigndHJhc2gnKTtcbiAgICAgICAgICBpdGVtLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5lbmFibGVkcGx1Z2luc2dyb3VwLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBjb25maWdJdGVtRWwucmVtb3ZlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWdMaXN0RWwgJiYgdGhpcy5jb25maWdMaXN0RWwuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29uZmlnTGlzdEVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICB0aGlzLmNvbmZpZ0xpc3RFbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBtZW51LmFkZEl0ZW0oaXRlbSA9PiB7XG4gICAgICAgICAgaXRlbS5zZXRUaXRsZSgnTW9kaWZ5Jykuc2V0SWNvbigncGVuY2lsJyk7XG4gICAgICAgICAgaXRlbS5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kaWZ5Q29tUGx1Z2luc0NvbmZpZyhpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBtb2RpZnlDb21QbHVnaW5zQ29uZmlnKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBnZXROYW1lTW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApLnNldFRpdGxlKCdNb2RpZnkgcGx1Z2lucyBjb25maWcnKTtcbiAgICBnZXROYW1lTW9kYWwub25PcGVuID0gKCkgPT4ge1xuICAgICAgbGV0IGNvbmZpZ05hbWUgPSAnJ1xuICAgICAgbmV3IFNldHRpbmcoZ2V0TmFtZU1vZGFsLmNvbnRlbnRFbClcbiAgICAgICAgLnNldE5hbWUoJ0NvbmZpZyBuYW1lJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKHRoaXMuc2V0dGluZ3MuZW5hYmxlZHBsdWdpbnNncm91cFtpbmRleF0ubmFtZSlcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25maWdOYW1lID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgICkpXG4gICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdTYXZlJylcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlnTmFtZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29uZmlnIG5hbWUgaXMgZW1wdHkuJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZW5hYmxlZHBsdWdpbnNncm91cFtpbmRleF0ubmFtZSA9IGNvbmZpZ05hbWU7XG4gICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZW5hYmxlZHBsdWdpbnNncm91cFtpbmRleF0uaWNvbnR5cGUgPSBpY29udHlwZTtcbiAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5lbmFibGVkcGx1Z2luc2dyb3VwW2luZGV4XS5pY29uID0gaWNvbjtcbiAgICAgICAgICAgICAgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgZ2V0TmFtZU1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIFxuICAgICAgbGV0IGljb250eXBlID0gdGhpcy5zZXR0aW5ncy5lbmFibGVkcGx1Z2luc2dyb3VwW2luZGV4XS5pY29udHlwZTtcbiAgICAgIGxldCBpY29uID0gdGhpcy5zZXR0aW5ncy5lbmFibGVkcGx1Z2luc2dyb3VwW2luZGV4XS5pY29uO1xuICAgICAgY29uc3QgaWNvblNldHRpbmcgPSBuZXcgU2V0dGluZyhnZXROYW1lTW9kYWwuY29udGVudEVsKVxuICAgICAgICAuc2V0TmFtZSgnQ29uZmlnIGljb24nKVxuICAgICAgICAuc2V0RGVzYygnQWNjZXB0cyBsdWNpZGUgaWNvbi4oQ2xpY2sgdGhlIGljb24gdG8gcmVmcmVzaC4gU3ZnIGljb24gaW4gdGhlIGZ1dHVyZS4pJyk7XG5cbiAgICAgIC8vIGljb25TZXR0aW5nLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAvLyAgIC5hZGRPcHRpb25zKHtcbiAgICAgIC8vICAgICAnbHVjaWRlJzogJ0x1Y2lkZScsXG4gICAgICAvLyAgICAgJ3N2Zyc6ICdTVkcnXG4gICAgICAvLyAgIH0pXG4gICAgICAvLyAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmVuYWJsZWRwbHVnaW5zZ3JvdXBbaW5kZXhdLmljb250eXBlKVxuICAgICAgLy8gICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAvLyAgICAgaWYgKHZhbHVlICE9PSBpY29udHlwZSkge1xuICAgICAgLy8gICAgICAgaWNvbnR5cGUgPSB2YWx1ZTtcbiAgICAgIC8vICAgICAgIGlmICghaWNvbm5hbWVFbCkgeyByZXR1cm47IH1cbiAgICAgIC8vICAgICAgIGljb25uYW1lRWwudmFsdWUgPSB2YWx1ZSA9PT0gJ2x1Y2lkZScgPyAncHV6emxlJyA6ICcnO1xuICAgICAgLy8gICAgICAgc2V0SWNvbihwcmV2aWV3SWNvbiwgJ3JlZnJlc2gtY3cnKTtcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyAgIH0pKVxuICAgICAgbGV0IGljb25uYW1lRWw6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICBpY29uU2V0dGluZ1xuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuZW5hYmxlZHBsdWdpbnNncm91cFtpbmRleF0uaWNvbilcbiAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGljb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBzZXRJY29uKHByZXZpZXdJY29uLCAncmVmcmVzaC1jdycpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWNvbm5hbWVFbCA9IHRleHQuaW5wdXRFbDtcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIFxuICAgICAgY29uc3QgcHJldmlld0ljb24gPSBpY29uU2V0dGluZy5jb250cm9sRWwuY3JlYXRlRGl2KHsgYXR0cjogeyBjbGFzczogJ3BtLXByZXZpZXctaWNvbicgfSB9KTtcbiAgICAgIHNldEljb24ocHJldmlld0ljb24sIHRoaXMuc2V0dGluZ3MuZW5hYmxlZHBsdWdpbnNncm91cFtpbmRleF0uaWNvbik7XG4gICAgICBcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChwcmV2aWV3SWNvbiwgJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoaWNvbnR5cGUgPT09ICdsdWNpZGUnKSB7XG4gICAgICAgICAgc2V0SWNvbihwcmV2aWV3SWNvbiwgaWNvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoaWNvbnR5cGUgPT09ICdzdmcnKSB7XG4gICAgICAgICAgYWRkSWNvbignbmV3Y29uZmlnaWNvbicsIGljb24pXG4gICAgICAgICAgc2V0SWNvbihwcmV2aWV3SWNvbiwgaWNvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBnZXROYW1lTW9kYWwuY29udGVudEVsLmZpbmQoJ2lucHV0JykuZm9jdXMoKTtcbiAgICB9XG4gICAgZ2V0TmFtZU1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIGxvYWRDb21QbHVnaW5zQ29uZmlnKGNvbmZpZzogRW5hYmxlZFBsdWdpbnMpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuYXBwLnNldHRpbmcuc2V0dGluZ1RhYnNbNl0uaW5zdGFsbGVkUGx1Z2luc0VsKSB7IHJldHVybjsgfVxuICAgIGNvbnN0IHBsdWdpbnNMaXN0RWwgPSB0aGlzLmFwcC5zZXR0aW5nLnNldHRpbmdUYWJzWzZdLmluc3RhbGxlZFBsdWdpbnNFbC5jaGlsZE5vZGVzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGx1Z2luc0xpc3RFbC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGx1Z2luRWwgPSBwbHVnaW5zTGlzdEVsW2ldIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgcGx1Z2luTmFtZSA9IHBsdWdpbkVsLnF1ZXJ5U2VsZWN0b3IoJy5zZXR0aW5nLWl0ZW0tbmFtZScpPy50ZXh0Q29udGVudDtcbiAgICAgIGlmICghcGx1Z2luTmFtZSkgeyBjb250aW51ZTsgfVxuICAgICAgY29uc3QgcGx1Z2luRGVzY3JpcHRpb24gPSBwbHVnaW5FbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyk/Lmxhc3RDaGlsZD8udGV4dENvbnRlbnQgfHwgJyc7XG4gICAgICBjb25zdCBwbHVnaW5JZCA9IHRoaXMubmFtZVRvSWQocGx1Z2luTmFtZSwgcGx1Z2luRGVzY3JpcHRpb24pO1xuICAgICAgaWYgKHBsdWdpbklkICYmIGNvbmZpZy5lbmFibGVkcGx1Z2lucy5pbmNsdWRlcyhwbHVnaW5JZCkpIHtcbiAgICAgICAgY29uc3QgcGx1Z2luVG9nZ2xlQnV0dG9uID0gcGx1Z2luRWwucXVlcnlTZWxlY3RvcignLmNoZWNrYm94LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAocGx1Z2luVG9nZ2xlQnV0dG9uICYmICFwbHVnaW5Ub2dnbGVCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1lbmFibGVkJykpIHtcbiAgICAgICAgICBwbHVnaW5Ub2dnbGVCdXR0b24uY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocGx1Z2luSWQgJiYgIWNvbmZpZy5lbmFibGVkcGx1Z2lucy5pbmNsdWRlcyhwbHVnaW5JZCkpIHtcbiAgICAgICAgY29uc3QgcGx1Z2luVG9nZ2xlQnV0dG9uID0gcGx1Z2luRWwucXVlcnlTZWxlY3RvcignLmNoZWNrYm94LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAocGx1Z2luVG9nZ2xlQnV0dG9uICYmIHBsdWdpblRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWVuYWJsZWQnKSkge1xuICAgICAgICAgIHBsdWdpblRvZ2dsZUJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYENhbid0IGZpbmQgcGx1Z2luOiAke3BsdWdpbk5hbWV9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmFtZVRvSWQobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5hcHAucGx1Z2lucy5tYW5pZmVzdHMpLmZpbmQoa2V5ID0+XG4gICAgKHRoaXMuYXBwLnBsdWdpbnMubWFuaWZlc3RzW2tleV0ubmFtZSA9PT0gbmFtZSAmJlxuICAgICAgdGhpcy5hcHAucGx1Z2lucy5tYW5pZmVzdHNba2V5XS5kZXNjcmlwdGlvbiA9PT0gZGVzY3JpcHRpb24pKSB8fCAnJztcbiAgfVxuXG4gIHNhdmVDb21tdW5pdHlQbHVnaW5zQ29uZmlnKCk6IHZvaWQge1xuICAgIGNvbnN0IGdldE5hbWVNb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCkuc2V0VGl0bGUoJ0FkZCBuZXcgY29tbXVuaXR5IHBsdWdpbnMgY29uZmlnJyk7XG4gICAgZ2V0TmFtZU1vZGFsLm9uT3BlbiA9ICgpID0+IHtcbiAgICAgIGxldCBjb25maWdOYW1lID0gJydcbiAgICAgIG5ldyBTZXR0aW5nKGdldE5hbWVNb2RhbC5jb250ZW50RWwpXG4gICAgICAgIC5zZXROYW1lKCdDb25maWcgbmFtZScpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbmZpZ05hbWUgPSB2YWx1ZTtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdTYXZlJylcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlnTmFtZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29uZmlnIG5hbWUgaXMgZW1wdHkuJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZW5hYmxlZHBsdWdpbnNncm91cC5wdXNoKHRoaXMuY3JlYXRlQ3VyQ29tUGx1Z2luc0NvbmZpZyh0aGlzLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLCBjb25maWdOYW1lLCBpY29udHlwZSwgaWNvbikpO1xuICAgICAgICAgICAgICB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICBnZXROYW1lTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICBcbiAgICAgIGxldCBpY29udHlwZSA9ICdsdWNpZGUnO1xuICAgICAgbGV0IGljb24gPSAncHV6emxlJztcbiAgICAgIGNvbnN0IGljb25TZXR0aW5nID0gbmV3IFNldHRpbmcoZ2V0TmFtZU1vZGFsLmNvbnRlbnRFbClcbiAgICAgICAgLnNldE5hbWUoJ0NvbmZpZyBpY29uJylcbiAgICAgICAgLnNldERlc2MoJ0FjY2VwdHMgbHVjaWRlIGljb24uKENsaWNrIHRoZSBpY29uIHRvIHJlZnJlc2guIFN2ZyBpY29uIGluIHRoZSBmdXR1cmUuKScpO1xuXG4gICAgICAvLyBpY29uU2V0dGluZy5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgLy8gICAuYWRkT3B0aW9ucyh7XG4gICAgICAvLyAgICAgJ2x1Y2lkZSc6ICdMdWNpZGUnLFxuICAgICAgLy8gICAgICdzdmcnOiAnU1ZHJ1xuICAgICAgLy8gICB9KVxuICAgICAgLy8gICAuc2V0VmFsdWUoaWNvbnR5cGUpXG4gICAgICAvLyAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgIC8vICAgICBpZiAodmFsdWUgIT09IGljb250eXBlKSB7XG4gICAgICAvLyAgICAgICBpY29udHlwZSA9IHZhbHVlO1xuICAgICAgLy8gICAgICAgaWYgKCFpY29ubmFtZUVsKSB7IHJldHVybjsgfVxuICAgICAgLy8gICAgICAgaWNvbm5hbWVFbC52YWx1ZSA9IHZhbHVlID09PSAnbHVjaWRlJyA/ICdwdXp6bGUnIDogJyc7XG4gICAgICAvLyAgICAgICBzZXRJY29uKHByZXZpZXdJY29uLCAncmVmcmVzaC1jdycpO1xuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfSkpXG4gICAgICBsZXQgaWNvbm5hbWVFbDogSFRNTElucHV0RWxlbWVudDtcbiAgICAgIGljb25TZXR0aW5nXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZShpY29uKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgaWNvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICBzZXRJY29uKHByZXZpZXdJY29uLCAncmVmcmVzaC1jdycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGljb25uYW1lRWwgPSB0ZXh0LmlucHV0RWw7XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICBcbiAgICAgIGNvbnN0IHByZXZpZXdJY29uID0gaWNvblNldHRpbmcuY29udHJvbEVsLmNyZWF0ZURpdih7IGF0dHI6IHsgY2xhc3M6ICdwbS1wcmV2aWV3LWljb24nIH0gfSk7XG4gICAgICBzZXRJY29uKHByZXZpZXdJY29uLCAncHV6emxlJyk7XG4gICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQocHJldmlld0ljb24sICdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKGljb250eXBlID09PSAnbHVjaWRlJykge1xuICAgICAgICAgIHNldEljb24ocHJldmlld0ljb24sIGljb24pO1xuICAgICAgICB9IGVsc2UgaWYgKGljb250eXBlID09PSAnc3ZnJykge1xuICAgICAgICAgIGFkZEljb24oJ25ld2NvbmZpZ2ljb24nLCBpY29uKVxuICAgICAgICAgIHNldEljb24ocHJldmlld0ljb24sIGljb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgXG4gICAgICBnZXROYW1lTW9kYWwuY29udGVudEVsLmZpbmQoJ2lucHV0JykuZm9jdXMoKTtcbiAgICB9XG4gICAgZ2V0TmFtZU1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIGNyZWF0ZUN1ckNvbVBsdWdpbnNDb25maWcoZW5hYmxlZFBsdWdpbnM6IFNldDxzdHJpbmc+LCBuYW1lOiBzdHJpbmcsIGljb250eXBlOiBzdHJpbmcsIGljb246IHN0cmluZyk6IEVuYWJsZWRQbHVnaW5zIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoMTApLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGljb250eXBlOiBpY29udHlwZSxcbiAgICAgIGljb246IGljb24sXG4gICAgICBlbmFibGVkcGx1Z2luczogQXJyYXkuZnJvbShlbmFibGVkUGx1Z2lucylcbiAgICB9XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEVuYWJsZWRDc3NTbmlwcGV0cywgRW5hYmxlZFBsdWdpbnMgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5cclxuaW1wb3J0IFNldHRpbmdzTWFuYWdlbWVudCBmcm9tIFwiLi9tYWluXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzT3B0aW9uc01hbmFnZW1lbnRTZXR0aW5ncyB7XHJcbiAgZW5hYmxlZHBsdWdpbnNncm91cDogRW5hYmxlZFBsdWdpbnNbXTtcclxuICBlbmFibGVkY3Nzc25pcHBldHM6IEVuYWJsZWRDc3NTbmlwcGV0c1tdO1xyXG4gIHBsdWdpbnNncmlkdHlwZTogJ2xpc3QnIHwgJ2dyaWQnO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogU2V0dGluZ3NPcHRpb25zTWFuYWdlbWVudFNldHRpbmdzID0ge1xyXG4gIGVuYWJsZWRwbHVnaW5zZ3JvdXA6IFtdLFxyXG4gIGVuYWJsZWRjc3NzbmlwcGV0czogW10sXHJcbiAgcGx1Z2luc2dyaWR0eXBlOiAnbGlzdCcsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nT3B0aW9uc01hbmFnZW1lbnRTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBTZXR0aW5nc01hbmFnZW1lbnQ7XHJcbiAgXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU2V0dGluZ3NNYW5hZ2VtZW50KSB7XHJcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICB9XHJcblxyXG4gIGRpc3BsYXkoKSB7XHJcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzXHJcbiAgICBjb250YWluZXJFbC5lbXB0eSgpXHJcbiAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUE4Rzs7O0FDQTlHLHNCQUFzQztBQVcvQixJQUFNLG1CQUFzRDtBQUFBLEVBQ2pFLHFCQUFxQixDQUFDO0FBQUEsRUFDdEIsb0JBQW9CLENBQUM7QUFBQSxFQUNyQixpQkFBaUI7QUFDbkI7OztBRDJCQSxJQUFxQixxQkFBckIsY0FBZ0Qsd0JBQU87QUFBQSxFQVNyRCxNQUFNLFNBQVM7QUFDYixVQUFNLEtBQUssYUFBYTtBQUN4QixVQUFNLEtBQUssYUFBYTtBQUd4QixTQUFLLGdCQUFnQixLQUFLLElBQUksUUFBUSxZQUFZLElBQUksU0FBTyxJQUFJLEVBQUU7QUFDbkUsU0FBSyxZQUFZLENBQUMsY0FBYyxXQUFXLFdBQVcsbUJBQW1CO0FBQ3pFLFNBQUssZ0JBQWdCO0FBR3JCLFNBQUssZUFBZTtBQUNwQixVQUFNLEtBQUssMEJBQTBC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
